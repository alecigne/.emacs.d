#+TITLE: SwanEmacs Dired settings
#+AUTHOR: Anthony Le Cigne

Useful links :

- [[https://github.com/Fuco1/dired-hacks][dired-hacks]]

* Table of contents                                            :toc:noexport:
- [[#dired][=dired=]]
- [[#dired-narrow][=dired-narrow=]]
- [[#dired-collapse][=dired-collapse=]]
- [[#wrapping-up][Wrapping up]]

* =dired=

=dired= can benefit from a new map based on the [[https://github.com/Fuco1/dired-hacks][dired-hacks]] page. I
use the =h= key as a keybinding since it was originally bound to
=describe-mode=.

#+BEGIN_SRC emacs-lisp :tangle yes
  (define-prefix-command 'swanemacs-dired-hacks-map)

  (use-package dired
    :ensure nil
    :bind
    (:map dired-mode-map
          ("h" . swanemacs-dired-hacks-map))
    :config
    (put 'dired-find-alternate-file 'disabled nil)
    (setq dired-listing-switches "-lha"))
#+END_SRC

From [[https://github.com/jwiegley/use-package#loading-packages-in-sequence][here]]:

#+BEGIN_QUOTE
Note: Pay attention if you set use-package-always-defer to t, and also
use the :after keyword, as you will need to specify how the declared
package is to be loaded: e.g., by some :bind. If you're not using one
of tho mechanisms that registers autoloads, such as :bind or :hook,
and your package manager does not provide autoloads, it's possible
that without adding :demand t to those declarations, your package will
never be loaded.
#+END_QUOTE

Since I set =use-package-always-defer= to =t=, I need =:demand t=.

#+BEGIN_SRC emacs-lisp :tangle yes
  (use-package dired+
    :ensure nil
    :load-path "~/.emacs.d/lisp/dired+/"
    :demand t
    :after dired
    :config
    (diredp-toggle-find-file-reuse-dir 1))
#+END_SRC

* =dired-narrow=

See this [[https://github.com/Fuco1/dired-hacks#dired-narrow][section]] on [[https://github.com/Fuco1/dired-hacks#dired-narrow][dired hacks]] and an [[http://pragmaticemacs.com/emacs/dynamically-filter-directory-listing-with-dired-narrow/][article]] about it on [[http://pragmaticemacs.com/emacs/dynamically-filter-directory-listing-with-dired-narrow/][Pragmatic
Emacs]].

#+BEGIN_SRC emacs-lisp :tangle yes
  (use-package dired-narrow
    :after dired
    :bind (:map swanemacs-dired-hacks-map
                ("n" . dired-narrow)
                ("f" . dired-narrow-fuzzy)
                ("r" . dired-narrow-regexp)))
#+END_SRC

* =dired-collapse=

https://github.com/Fuco1/dired-hacks#dired-collapse

#+BEGIN_SRC emacs-lisp :tangle yes
  (use-package dired-collapse
    :bind (:map swanemacs-dired-hacks-map
                ("c" . dired-collapse-mode)))
#+END_SRC

* Wrapping up

#+BEGIN_SRC emacs-lisp :tangle yes
  (provide 'swanemacs-dired)
#+END_SRC

* Config                                                           :noexport:

#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="//anthony.lecigne.net/style.css"/>
#+OPTIONS: toc:nil num:nil
# #+HTML_HEAD: <link rel="stylesheet" type="text/css" href="https://gongzhitaao.org/orgcss/org.css"/>
